\chapter{Технологический раздел}

\section{Выбор языка программирования и среды разработки}

В качестве языка для разработки программы был выбран язык программирования C++. Данный выбор основан на следующих аспектах:
\begin{itemize}[label=---]
    \item C++ --- объектно-ориентированный язык, а именно такая методология программирования была выбрана для разработки программы;
    \item статическая типизация, позволяющая находить большое число ошибок на стадии компиляции;
    \item изучение курса ООП в 4 семестре и написание лабораторной работы на схожую с текущей задачей тему.
\end{itemize}

В качестве среды разработки была выбрана программа $QT Creator$, так как в ней есть возможность быстрого создания интерфейса с помощью расширения $QTDesign$.

\section{Интерфейс пользователя}

На рисунках \ref{img:main_window}--\ref{img:window_move} представлен интерфейс окон программы.

\imgScale{0.47}{main_window}{Основное окно программы}
\FloatBarrier
\imgScale{1}{window_scene}{Окно добавления платформы}
\FloatBarrier
\imgScale{1}{window_brick}{Окно добавления кирпичика}
\FloatBarrier
\imgScale{1}{window_plate}{Окно добавления пластинки}
\FloatBarrier
\imgScale{1}{window_tile}{Окно добавления плитки}
\FloatBarrier
\imgScale{1}{window_arc}{Окно добавления арки}
\FloatBarrier
\imgScale{1}{window_cylinder}{Окно добавления цилиндра}
\FloatBarrier
\imgScale{1}{window_light}{Окно добавления источника света}
\FloatBarrier
\imgScale{1}{window_delete}{Окно удаления деталей}
\FloatBarrier
\imgScale{1}{window_change}{Окно перемещения деталей}
\FloatBarrier
\imgScale{1}{window_move}{Окно ввода новых координат}
\FloatBarrier

\section{Порядок работы}

Ниже приведены некоторые важные аспекты работы программы:
\begin{itemize}[label=---]
    \item для того чтобы начать строить конструкции из деталей LEGO необходимо создать платформу, задав ее размеры;
    \item номера ячеек, которые указываются в качестве данных о расположении детали, говорят о том, куда будет помещен верхний левый угол детали (если смотреть относительно начального положения камеры);
    \item если при добавлении очередной детали LEGO указать такую позицию, при которой она попадает сверху на другую, добавляемая деталь будет поставлена сверху на уже существующую;
    \item нельзя удалять и перемещать те элементы, над которыми находятся другие детали;
    \item на деталь <<плитка>> нельзя ставить блоки LEGO;
    \item если при добавлении детали было указано такое ее положение или размеры, при котором она вылезает за границы платформы, то эта деталь не будет размещена на сцене.
\end{itemize}

% При написании программного продукта был выбран язык C++. Это обусловлено следующими факторами.

% \begin{itemize}
% 	\item C++ обладает высокой вычислительной производительностью, что очень важно для выполнения поставленной задачи.
% 	\item Данный язык поддерживает объектно-ориентированную парадигму программирования. Благодаря чему можно приводить объекты сцены к объектам классов, а также пользоваться шаблонами проектирования. Это дает возможность эффективного написания код.
% 	\item Данный язык преподавался в рамках курса Объектно-Ориентированного Программирования.
% 	\item Доступность. Для С++ существует большое количество учебной литературы.
% \end{itemize}

% При написании программы будет задействована среда разработки QT Creator. Данный выбор обусловлен следующими факторами.

% \begin{itemize}
% 	\item Основы работы с данной средой разработки изучались в рамках курса Программирования на Си.
% 	\item QT Creator позволяет работать с расширением Qt Design, которое позволит создать удобный и надежный интерфейс для программного продукта в сжатые сроки.
% \end{itemize}

% \clearpage

% \section{Структура реализуемых классов}

% На рисунках \ref{fig:scheme_1} - \ref{fig:scheme_2} представлена структура реализуемых классов.

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.6]{img/scheme_1.png}
% 	\caption{Структура классов Dot3D, Vertex, Facet, PolModel, Illuminant}
% 	\label{fig:scheme_1}
% \end{figure} 

% \begin{itemize}
% 	\item \textbf{Dot3D} -- класс точки трехмерного пространства. Хранит координаты в
% 	пространстве, владеет методами преобразований точки.
% 	\item \textbf{Vertex} -- класс вершины. Хранит координаты точки вершины и номера граней, в которых она задействована.
% 	\item \textbf{Facet} -- класс грани. Хранит номера задействованных в грани вершин.
% 	\item \textbf{PolModel} -- класс полигональной модели. Хранит множество вершин и граней, образующих модель, ее имя и координаты ячейки, размеры модели и ось, вдоль которой она расположена. Владеет методами перемещения и вращения по оси Z модели.
% 	\item \textbf{Illuminant} -- класс источника света. Хранит теневую карту источника, матрицу преобразований и соответствующие ей углы для перемещения текущей точки обзора в точку размещения источника. Владеет методом очистки собственной теневой карты.
% \end{itemize}

% \clearpage

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.6]{img/scheme_2.png}
% 	\caption{Структура классов CellScene, Drawer, UsageFacade, PlaceHouseChooser, PlaceTreeChooser, PlaceRoadChooser, PlaceCarChooser, MainWindow, sizeChooser, moveChooser, illuminantPlaceChooser, ObjectChanger, ObjectHangman}
% 	\label{fig:scheme_2}
% \end{figure} 

% \clearpage

% \begin{itemize}
% 	\item \textbf{CellScene} -- класс рабочей области сцены. Хранит длину и ширину сцены, модель сцены, на которой размещаются другие объекты, матрицу преобразований для перехода в текущую точку наблюдения, множество моделей интерьера и источников света, размещенных на сцене, и их кол-во, а также точку центра выполнения преобразований. Еще в этом классе хранится матрица использованных клеток сцены. Владеет методами выполнения преобразований над сценой, построения области размещения моделей, добавления и удаления объектов и источников света, отмечания и отчищения занятых клеток в матрице использованных клеток сцены.
% 	\item \textbf{UsageFacade} -- класс, отвечающий за взаимодействие пользователя с программным обеспечением. Хранит формируемую сцену и класс, отвечающий за растеризацию сцены (наложение сетки, каждая из ячеек которой обрабатывается особым образом). Владеет методами добавления моделей на сцену и преобразований сцены.
% 	\item \textbf{Drawer} -- класс, отвечающий за растеризацию сцены. Хранит буфер кадра и буфер глубины. Владеет методами алгоритма теневого z-буфера и формирования объекта для отображения рисунка в главном приложении.
% 	\item \textbf{PlaceHouseChooser} -- класс, связанный с интерфейсом выбора расположения дома (выбора начальной точки модели, ее длины, ширины и высоты).
% 	\item \textbf{PlaceTreeChooser} -- класс, связанный с интерфейсом выбора расположения дерева (выбора начальной точки модели).
% 	\item \textbf{PlaceRoadChooser} -- класс, связанный с интерфейсом выбора расположения дороги (выбора начальной точки модели, а также ее ориентации в пространстве).
%  	\item \textbf{PlaceCarChooser} -- класс, связанный с интерфейсом выбора расположения машины (выбора начальной точки модели, а также ее ориентации в пространстве).
% 	\item \textbf{MainWindow} -- точка входа в программу.
% 	\item \textbf{SizeChooser} -- класс, связанный с интерфейсов выбора размера сцены. Хранит в себе значений длины и ширины создаваемой сцены.
% 	\item \textbf{moveChooser} -- класс, связанный с интерфейсом выбора нового расположения модели (выбора новой начальной точки модели).
% 	\item \textbf{IlluminantPlaceChooser} -- класс, связанный с интерфейсом выбора расположения добавляемого источника света. Хранит углы поворота относительно осей X и Y для перехода из точки наблюдения в точку расположения источника света.
% 	\item \textbf{ObjectChanger} -- класс, связанный с интерфейсом перемещения объектов по сцене. Хранит фасад, с которым в данный момент работает. Владеет методом изменения модели и методом пересчёта номеров моделей на сцене.
% 	\item \textbf{ObjectHangman} -- класс, связанный с интерфейсом удаления объектов со сцены. Хранит сцену, с которой в данный момент работает. Владеет методом пересчёта номеров моделей на сцене.
% \end{itemize}


% \section{Сведения о модулях программы}

% \begin{itemize}
% 	\item \textbf{main.cpp} -- главная точка входа в приложение;
% 	\item \textbf{mainwindow.cpp, mainwindow.h} -- описание и реализация главного окна приложения;
% 	\item \textbf{mainwindow.ui} -- форма пользовательского интерфейса главного окна приложения;
% 	\item \textbf{placechooser.cpp, placechooser.hpp} -- описание и реализация классов выбора расположения моделей ($PlaceHouseChooser$, $PlaceTreeChooser$, $PlaceRoadChooser$, $PlaceCarChooser$);
% 	\item \textbf{placehousechooser.ui} -- форма пользовательского интерфейса класс\linebreak $PlaceHouseChooser$;
% 	\item \textbf{placetreechooser.ui} -- форма пользовательского интерфейса класса\linebreak $PlaceTreeChooser$;
% 	\item \textbf{placeroadсhooser.ui} -- форма пользовательского интерфейса класса\linebreak $PlaceRoadChooser$;
% 	\item \textbf{placecarсhooser.ui} -- форма пользовательского интерфейса класса\linebreak $PlaceCarChooser$;
% 	\item \textbf{sizechooser.cpp, sizechooser.hpp} -- описание и реализация класса\linebreak $SizeChooser$;
% 	\item \textbf{sizechooser.ui} -- форма пользовательского интерфейса класса\linebreak $SizeChooser$;
% 	\item \textbf{illuminantplacechooser.cpp, illuminantplacechooser.hpp} -- описание и реализация класса $IlluminantPlaceChooser$;
% 	\item \textbf{illuminantplacechooser.ui} -- форма пользовательского интерфейса класса $IlluminantPlaceChoooser$;
% 	\item \textbf{movechooser.cpp, movechooser.hpp} -- описание и реализация класса\linebreak $moveChooser$;
% 	\item \textbf{movechooser.ui} -- форма пользовательского интерфейса класса\linebreak $moveChooser$;
% 	\item \textbf{objectchanger.cpp, objectchanger.hpp} -- описание и реализация класса $objectChanger$;
% 	\item \textbf{objectchanger.ui} -- форма пользовательского интерфейса класса\linebreak $objectChanger$;
% 	\item \textbf{objecthangman.cpp, objecthangman.hpp} -- описание и реализация класса $objectHangman$;
% 	\item \textbf{objecthangman.ui} -- форма пользовательского интерфейса класса\linebreak $objectHangman$;
% 	\item \textbf{additivemathelements.cpp, additivemathelements.hpp} -- описание и реализация классов математических объектов;
% 	\item \textbf{objects.cpp, objects.hpp} -- описание и реализация класса полигональных моделей, источников света и сцены.
% 	\item \textbf{usagefacade.cpp, usagefacade.hpp} -- описание и реализация классов $UsageFacade$ и $Drawer$;
% \end{itemize}

% \section{Интерфейс программного обеспечения}

% На рисунке \ref{fig:interface} изображен интерфейс главного окна программного обеспечения.

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.5]{img/interface.png}
% 	\caption{Интерфейс главного окна ПО}
% 	\label{fig:interface}
% \end{figure} 

% Интерфейс главного окна ПО позволяет: 
% \begin{itemize}
% 	\item создавать сцену с объектами, масштабировать ее и перемещать в центр преобразования;
% 	\item расставлять объекты на клетки сетки сцены, перемещать и удалять их, а также вращать объекты вместе с сценой.
% \end{itemize}

% На рисунке \ref{fig:scene} изображен интерфейс окна выбора размеров новой сцены. 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.55]{img/scene.png}
% 	\caption{Интерфейс окна выбора размеров новой сцены}
% 	\label{fig:scene}
% \end{figure} 

% На рисунках \ref{fig:house} - \ref{fig:car} изображены интерфейсы окон выбора размеров новых объектов. 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.55]{img/house.png}
% 	\caption{Интерфейс окна выбора распоожения дома}
% 	\label{fig:house}
% \end{figure} 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.65]{img/tree.png}
% 	\caption{Интерфейс окна выбора распоожения дерева}
% 	\label{fig:tree}
% \end{figure} 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.65]{img/road.png}
% 	\caption{Интерфейс окна выбора распоожения дороги}
% 	\label{fig:road}
% \end{figure} 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.65]{img/car.png}
% 	\caption{Интерфейс окна выбора распоожения машины}
% 	\label{fig:car}
% \end{figure} 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.65]{img/illuminant.png}
% 	\caption{Интерфейс окна выбора распоожения источника света}
% 	\label{fig:illuminant}
% \end{figure} 

% \clearpage

% На рисунках \ref{fig:change1} - \ref{fig:change2} изображены интерфейсы окон для перемещения  объетов по сетке сцены. 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.57]{img/change1.png}
% 	\caption{Интерфейс окна выбора перемещаемого объекта}
% 	\label{fig:change1}
% \end{figure} 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.56]{img/change2.png}
% 	\caption{Интерфейс окна выбора нового расположения объекта}
% 	\label{fig:change2}
% \end{figure} 

% \clearpage

% На рисунке \ref{fig:deletion} изображен интерфейс окна для удаления объетов со сцены. 

% \begin{figure}[h]
% 	\centering
% 	\includegraphics[scale=0.6]{img/deletion.png}
% 	\caption{Интерфейс окна выбора удаляемого объекта}
% 	\label{fig:deletion}
% \end{figure} 

% \section{Вывод}

% В данном разделе были выбраны язык программирования и среда разработки, описаны поля реализуемых классов, сведения о модулях программы, а также интерфейс програмного обеспечения.
